<%= simple_form_for @page, url: url = (@page.new_record?) ? admin_pages_path : admin_page_path(@page) do |f| %>
  <%= f.error_notification %>

  <div class="form-inputs">
    <%= f.input :user_id, collection: @users.collect { |u| [u.real_name, u.id] }, include_blank: false if @users.present? %>
    <%= f.input :main_gallery_id, collection: Gallery.global.collect { |s| [s.name, s.id] }, selected: @page.main_gallery_id, include_blank: true, input_html: { multiple: false, class: "select2" }  %>
    <%= f.input :resource_id, as: :select, wrapper_html: { class: 'test' } do  %>
          <select class="form-control select optional select2" data-template="image" name="page[resource_id]" id="page_resource_id">
            <option value="">À défaut de galerie principale, choisir une image</option>
            <% Resource.global.each do |resource| %>
              <%= content_tag :option, resource.name || resource.handle_identifier, {value: resource.id, data: {img: resource.thumb_url}} %>
            <% end %>
          </select>
        <% end %>
    <%= f.input :title %>
    <%= f.input :subtitle %>
    <%= f.input :content %>
    <%= f.input :final_gallery_id, collection: Gallery.global.collect { |s| [s.name, s.id] }, selected: @page.main_gallery_id, include_blank: true, input_html: { multiple: false, class: "select2" }  %>
    <%= f.input :exergue %>
    <%= f.input :social_block %>
    <%= f.input :status, collection: Page.statuses.collect { |s| [t("page.statuses.#{s.first}"), s.first] }, include_blank: false %>
  </div>
  <hr />
  <div class="form-actions">
    <%= link_to 'Annuler', url, class: 'btn btn-default' %>
    <%= f.button :submit, 'Enregistrer' %>
  </div>
<% end %>
